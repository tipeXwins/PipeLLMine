976c976
<     reg_t allbit_sample = Utils::int2reg(val, 2, qubits.size());
---
>     reg_t allbit_sample = Utils::int2reg(val, 2, qreg_.num_qubits());
979,980c979,980
<     for (uint_t j=0; j<qubits.size(); j++){
<       sample.push_back(allbit_sample[j]);
---
>     for (uint_t qubit : qubits) {
>       sample.push_back(allbit_sample[qubit]);
